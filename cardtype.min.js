!function(a,b){"function"==typeof define&&define.amd?define(b):a.CardType=b()}(this,function(){function a(a){var b;return b="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b=-1,c=-1;for(b=0;b<this.length;b++)if(this[b]===a){c=b;break}return c},b.call(this,a)}function b(a){return this.acceptedTypes=a||["amex","diners_club_carte_blanche","diners_club_international","discover","jcb","laser","maestro","mastercard","visa_electron","visa"],this.cardTypes=[{name:"amex",pattern:/^3[47]/,validLength:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,validLength:[14]},{name:"diners_club_international",pattern:/^36/,validLength:[14]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,validLength:[16]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,validLength:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,validLength:[16,17,18,19]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,validLength:[12,13,14,15,16,17,18,19]},{name:"mastercard",pattern:/^5[1-5]/,validLength:[16]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,validLength:[16]},{name:"visa",pattern:/^4/,validLength:[16]}],this}return b.prototype.getType=function(b){for(var c=this.cardTypes,d=0;d<c.length;d++)if(b.match(c[d].pattern)&&a.call(this.acceptedTypes,c[d].name)>-1)return c[d];return!1},b.prototype.isValidLuhn=function(a){for(var b,c=0,d=a.split("").reverse(),e=0;e<d.length;e++)b=+d[e],e%2?(b*=2,c+=10>b?b:b-9):c+=b;return c%10===0},b.prototype.isValidLength=function(b,c){return a.call(c.validLength,b.length)>-1},b.prototype.isValid=function(a){return this.validate(a).valid},b.prototype.validate=function(a){var b=this.normalize(a),c=this.getType(b),d=!1,e=!1;return c&&(d=this.isValidLuhn(b),e=this.isValidLength(b,c)),{valid:d&&e,validLuhn:d,validLength:e,cardType:c.name}},b.prototype.normalize=function(a){return a.replace(/[ -]/g,"")},b});
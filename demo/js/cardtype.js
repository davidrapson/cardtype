/**
  * cardtype - Credit card validator with AMD support
  *
  * @version v1.0.0-pre
  * @license CC-BY-SA-3.0
  */

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.CardType=t()}(this,function(){function e(e){var t;return t="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t=-1,n=-1;for(t=0;t<this.length;t++)if(this[t]===e){n=t;break}return n},t.call(this,e)}function t(e){return this.acceptedTypes=e||["amex","diners_club_carte_blanche","diners_club_international","discover","jcb","laser","maestro","mastercard","visa_electron","visa"],this.cardTypes=[{name:"amex",pattern:/^3[47]/,validLength:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,validLength:[14]},{name:"diners_club_international",pattern:/^36/,validLength:[14]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,validLength:[16]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,validLength:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,validLength:[16,17,18,19]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,validLength:[12,13,14,15,16,17,18,19]},{name:"mastercard",pattern:/^5[1-5]/,validLength:[16]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,validLength:[16]},{name:"visa",pattern:/^4/,validLength:[16]}],this}return t.prototype.getType=function(t){for(var n=this.cardTypes,a=0;a<n.length;a++)if(t.match(n[a].pattern)&&e.call(this.acceptedTypes,n[a].name)>-1)return n[a];return!1},t.prototype.isValidLuhn=function(e){for(var t,n=0,a=e.split("").reverse(),r=0;r<a.length;r++)t=+a[r],r%2?(t*=2,n+=10>t?t:t-9):n+=t;return n%10===0},t.prototype.isValidLength=function(t,n){return e.call(n.validLength,t.length)>-1},t.prototype.isValid=function(e){return this.validate(e).valid},t.prototype.validate=function(e){var t=this.normalize(e),n=this.getType(t),a=n?this.isValidLuhn(t):!1,r=n?this.isValidLength(t,n):!1;return{valid:a&&r,validLuhn:a,validLength:r,cardType:n.name}},t.prototype.normalize=function(e){return e.replace(/[ -]/g,"")},t});
